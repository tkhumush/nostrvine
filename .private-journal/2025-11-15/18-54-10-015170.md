---
title: "6:54:10 PM - November 15, 2025"
date: 2025-11-15T18:54:10.015Z
timestamp: 1763232850015
---

## Project Notes

**Black Screen Bug Analysis - Nov 15, 2025**

**Reported Issues**:
1. Black screen after saving profile in ProfileSetupScreen
2. Black screen after pressing Cancel in ProfileSetupScreen  
3. Black screen when pressing Record Video from VineDraftsScreen

**Root Cause Identified**: Navigation timing race condition (same as Nov 13 bug report issue)

**Problem Pattern**:
- Using `Navigator.pop()` or `context.pop()` in close proximity to navigation or dialogs
- Flutter navigation animations take ~300ms to complete
- If new navigation happens before animation completes, modal barriers get corrupted
- Results in invisible barrier blocking all UI touches

**Code Locations to Fix**:

1. **ProfileSetupScreen** (lines 986, 1021):
   - After successful profile publish: `Navigator.of(context).pop(true)`
   - After failed retry: `Navigator.of(context).pop(false)`
   - Both happen after showing SnackBar which may cause timing conflict

2. **ProfileSetupScreen Cancel button** (line 579):
   - `Navigator.of(context).pop()` when Cancel pressed
   - May conflict with SnackBar or other UI transitions

3. **VineDraftsScreen** (line 150):
   - "Record a Video" button uses `Navigator.of(context).pop()`
   - Then CameraFAB immediately does `Navigator.push()` for camera
   - Classic timing race!

**Solution Pattern** (from Nov 13 fix):
```dart
// Instead of direct pop:
Navigator.pop(context);

// Use post-frame callback:
WidgetsBinding.instance.addPostFrameCallback((_) {
  if (!context.mounted) return;
  Navigator.pop(context);
});

// OR use delay:
await Future.delayed(Duration(milliseconds: 300));
if (context.mounted) Navigator.pop(context);
```

**Next Steps**:
1. Fix ProfileSetupScreen navigation after save/cancel
2. Fix VineDraftsScreen "Record a Video" button navigation
3. Test all three scenarios manually
4. Check for similar patterns elsewhere

